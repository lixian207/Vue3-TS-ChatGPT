var ue=Object.defineProperty;var _e=(e,o,l)=>o in e?ue(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l;var v=(e,o,l)=>(_e(e,typeof o!="symbol"?o+"":o,l),l);import{o as u,c as g,aj as pe,ak as me,a as t,C as ge,r as p,w as we,Y as be,n as k,f as fe,u as r,L as N,S as m,Q as f,M as R,ab as O,x as S,ac as he,s as ve,al as z,U as ye,P as Q,a9 as je}from"./@vue.14a7b677.js";import{_ as ke}from"./index.5bc3222a.js";import{C as F}from"./crypto-js.6aa1dd77.js";import{E as D,a as C,b as Y,c as xe,d as Se,e as ze}from"./element-plus.d2cfb5b0.js";import{H as E,j as Ce,p as De,g as Ee,a as Be,r as Fe,s as Me,b as Ke,c as Ve,l as Ie,d as Ne,x as Re,e as Te,f as qe,h as Ae}from"./highlight.js.243975e6.js";import{m as W,_ as Le}from"./marked.71c0c359.js";import"./vue-router.59776677.js";import"./@element-plus.df50e9cf.js";import"./@ctrl.b082b0c1.js";import"./@vueuse.f2d0f84a.js";import"./@popperjs.36402333.js";import"./lodash-es.6aaf5ee5.js";const Pe="/Vue3-TS-ChatGPT/assets/3.c13c7547.svg",T=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),U=[{role:"system",content:"You are ChatGPT, Please answer my questions in a simple, easy-to-understand, and detailed manner. Please prioritize Chinese answers and provide straightforward examples when answering questions as much as possible."},{role:"assistant",content:"\u4F60\u597D\uFF0C\u6211\u662F\u795E\u5947\u6D77\u87BA\uFF0C\u6B22\u8FCE\u63D0\u95EE"}],y=class{constructor(){v(this,"dbName","ChatAppDB");v(this,"objectStoreName","chatRecords");v(this,"chatRecordKey","chatRecordKey");v(this,"isIndexedDBSupported","indexedDB"in window)}static getInstance(){return y.instance||(y.instance=new y),y.instance}initDB(){return new Promise((o,l)=>{const s=indexedDB.open(this.dbName,1);s.onerror=_=>{l("Failed to open IndexedDB")},s.onsuccess=_=>{o(_.target.result)},s.onupgradeneeded=_=>{const d=_.target.result;d.objectStoreNames.contains(this.objectStoreName)||d.createObjectStore(this.objectStoreName)}})}async saveChatRecord(o){this.isIndexedDBSupported?(await this.initDB()).transaction([this.objectStoreName],"readwrite").objectStore(this.objectStoreName).put(o,this.chatRecordKey):localStorage.setItem(this.chatRecordKey,JSON.stringify(o))}async getChatRecord(){if(this.isIndexedDBSupported){const o=await this.initDB();return new Promise((l,s)=>{const w=o.transaction([this.objectStoreName]).objectStore(this.objectStoreName).get(this.chatRecordKey);w.onerror=K=>{s("Failed to fetch record from IndexedDB")},w.onsuccess=K=>{l(w.result)}})}else{const o=localStorage.getItem(this.chatRecordKey);return o?JSON.parse(o):null}}async deleteChatRecord(){this.isIndexedDBSupported?(await this.initDB()).transaction([this.objectStoreName],"readwrite").objectStore(this.objectStoreName).delete(this.chatRecordKey):localStorage.removeItem(this.chatRecordKey)}};let B=y;v(B,"instance");const He={},Je=e=>(pe("data-v-0afe7f66"),e=e(),me(),e),Oe={class:"com__box"},Qe=Je(()=>t("div",{class:"loading"},[t("div"),t("div"),t("div"),t("div"),t("div"),t("div"),t("div"),t("div"),t("div")],-1)),Ye=[Qe];function Ue(e,o){return u(),g("div",Oe,Ye)}const Ge=ke(He,[["render",Ue],["__scopeId","data-v-0afe7f66"]]);async function $e(e,o,l){try{return{status:"success",data:(await fetch("https://api.openai.com/v1/chat/completions",{method:"post",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:l,stream:!0,messages:e})})).body}}catch(s){return{status:"error",message:s}}}const Z="SuMingcheng";F.enc.Utf8.parse("ThisIsAnIV123456");function We(e){return F.AES.encrypt(e,Z).toString()}function Ze(e){return e==null?"":F.AES.decrypt(e,Z).toString(F.enc.Utf8)}const Xe=new TextDecoder("utf-8"),G={get(e){return Ze(window.localStorage.getItem(e))},set(e,o){window.localStorage.setItem(e,We(o))},remove(e){window.localStorage.removeItem(e)}};function eo(){return{getKey:()=>{const l=G.get("apiKey");return l===null?"":l},setKey:l=>G.set("apiKey",l)}}const oo=e=>{if(e)scrollTo(0,e.scrollHeight);else return},lo=e=>{navigator.clipboard.writeText(e).then(function(){D({message:"\u5DF2\u590D\u5236",type:"success"})},function(o){console.error("\u65E0\u6CD5\u590D\u5236\u6587\u672C: ",o)})},$=()=>{const e=document.getElementsByClassName("copyNode");Array.from(e).forEach(l=>{l.copyAction&&l.removeEventListener("click",l.copyAction),l.copyAction=()=>{lo(l.nextSibling.textContent)},l.addEventListener("click",l.copyAction)})},M=new Le,ao={javascript:Ce,python:De,go:Ee,java:Be,rust:Fe,shell:Me,php:Ke,sql:Ve,less:Ie,css:Ne,xml:Re,json:Te,c:qe,cpp:Ae};for(const[e,o]of Object.entries(ao))E.registerLanguage(e,o);M.text=function(e){return e.startsWith("$")&&e.endsWith("$")?`<span class='math'>${e.slice(1,-1)}</span>`:e};M.paragraph=function(e){return e.startsWith("$$")&&e.endsWith("$$")?`<div class='math'>${e.slice(2,-2)}</div>`:"<p>"+e+`</p>
`};M.code=(e,o)=>{const s=!!(o&&E.getLanguage(o))?E.highlight(e,{language:o}).value:E.highlightAuto(e).value;return`<pre class='clearfix'><button class='copyNode'>Copy</button><code class='${o} hljs'>${s}</code></pre>
`};W.setOptions({renderer:M});const to=e=>W(e),io=[{id:"whisper-1",object:"model",created:1677532384,owned_by:"openai-internal",permission:[{id:"modelperm-KlsZlfft3Gma8pI6A8rTnyjs",object:"model_permission",created:1683912666,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"whisper-1",parent:null},{id:"babbage",object:"model",created:1649358449,owned_by:"openai",permission:[{id:"modelperm-49FUp5v084tBB49tC4z8LPH5",object:"model_permission",created:1669085501,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage",parent:null},{id:"davinci",object:"model",created:1649359874,owned_by:"openai",permission:[{id:"modelperm-U6ZwlyAd0LyMk4rcMdz33Yc3",object:"model_permission",created:1669066355,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"davinci",parent:null},{id:"text-davinci-edit-001",object:"model",created:1649809179,owned_by:"openai",permission:[{id:"modelperm-otmQSS0hmabtVGHI9QB3bct3",object:"model_permission",created:1679934178,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-davinci-edit-001",parent:null},{id:"babbage-code-search-code",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-4qRnA3Hj8HIJbgo0cGbcmErn",object:"model_permission",created:1669085863,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage-code-search-code",parent:null},{id:"text-similarity-babbage-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-48kcCHhfzvnfY84OtJf5m8Cz",object:"model_permission",created:1669081947,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-similarity-babbage-001",parent:null},{id:"code-davinci-edit-001",object:"model",created:1649880484,owned_by:"openai",permission:[{id:"modelperm-Foe5Y4TvaKveYxt74oKMw8IB",object:"model_permission",created:1679934178,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"code-davinci-edit-001",parent:null},{id:"text-davinci-001",object:"model",created:1649364042,owned_by:"openai",permission:[{id:"modelperm-MVM5NfoRjXkDve3uQW3YZDDt",object:"model_permission",created:1669066355,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-davinci-001",parent:null},{id:"ada",object:"model",created:1649357491,owned_by:"openai",permission:[{id:"modelperm-u0nKN4ub7EVQudgMuvCuvDjc",object:"model_permission",created:1675997661,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada",parent:null},{id:"babbage-code-search-text",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-Lftf8H4ZPDxNxVs0hHPJBUoe",object:"model_permission",created:1669085863,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage-code-search-text",parent:null},{id:"babbage-similarity",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-mS20lnPqhebTaFPrcCufyg7m",object:"model_permission",created:1669081947,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage-similarity",parent:null},{id:"code-search-babbage-text-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-EC5ASz4NLChtEV1Cwkmrwm57",object:"model_permission",created:1669085863,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"code-search-babbage-text-001",parent:null},{id:"text-curie-001",object:"model",created:1649364043,owned_by:"openai",permission:[{id:"modelperm-8InhPV3CZfN3F5QHKoJd4zRD",object:"model_permission",created:1679310997,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-curie-001",parent:null},{id:"gpt-3.5-turbo-16k-0613",object:"model",created:1685474247,owned_by:"openai",permission:[{id:"modelperm-RizYeOCRqav9e70KnCJXhMlS",object:"model_permission",created:1686675077,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"gpt-3.5-turbo-16k-0613",parent:null},{id:"code-search-babbage-code-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-64LWHdlANgak2rHzc3K5Stt0",object:"model_permission",created:1669085864,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"code-search-babbage-code-001",parent:null},{id:"text-ada-001",object:"model",created:1649364042,owned_by:"openai",permission:[{id:"modelperm-KN5dRBCEW4az6gwcGXkRkMwK",object:"model_permission",created:1669088497,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-ada-001",parent:null},{id:"text-similarity-ada-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-DdCqkqmORpqxqdg4TkFRAgmw",object:"model_permission",created:1669092759,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-similarity-ada-001",parent:null},{id:"curie-instruct-beta",object:"model",created:1649364042,owned_by:"openai",permission:[{id:"modelperm-bsg59MlOi88CMf1MjnIKrT5a",object:"model_permission",created:1680267269,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"curie-instruct-beta",parent:null},{id:"ada-code-search-code",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-wa8tg4Pi9QQNaWdjMTM8dkkx",object:"model_permission",created:1669087421,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada-code-search-code",parent:null},{id:"ada-similarity",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-LtSIwCEReeDcvGTmM13gv6Fg",object:"model_permission",created:1669092759,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada-similarity",parent:null},{id:"code-search-ada-text-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-JBssaJSmbgvJfTkX71y71k2J",object:"model_permission",created:1669087421,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"code-search-ada-text-001",parent:null},{id:"text-search-ada-query-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-1YiiBMYC8it0mpQCBK7t8uSP",object:"model_permission",created:1669092640,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-ada-query-001",parent:null},{id:"davinci-search-document",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-M43LVJQRGxz6ode34ctLrCaG",object:"model_permission",created:1669066355,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"davinci-search-document",parent:null},{id:"ada-code-search-text",object:"model",created:1651172510,owned_by:"openai-dev",permission:[{id:"modelperm-kFc17wOI4d1FjZEaCqnk4Frg",object:"model_permission",created:1669087421,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada-code-search-text",parent:null},{id:"text-search-ada-doc-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-kbHvYouDlkD78ehcmMOGdKpK",object:"model_permission",created:1669092640,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-ada-doc-001",parent:null},{id:"davinci-instruct-beta",object:"model",created:1649364042,owned_by:"openai",permission:[{id:"modelperm-k9kuMYlfd9nvFiJV2ug0NWws",object:"model_permission",created:1669066356,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"davinci-instruct-beta",parent:null},{id:"text-similarity-curie-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-6dgTTyXrZE7d53Licw4hYkvd",object:"model_permission",created:1669079883,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-similarity-curie-001",parent:null},{id:"code-search-ada-code-001",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-8soch45iiGvux5Fg1ORjdC4s",object:"model_permission",created:1669087421,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"code-search-ada-code-001",parent:null},{id:"ada-search-query",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-b753xmIzAUkluQ1L20eDZLtQ",object:"model_permission",created:1669092640,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada-search-query",parent:null},{id:"text-search-davinci-query-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-9McKbsEYSaDshU9M3bp6ejUb",object:"model_permission",created:1669066353,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-davinci-query-001",parent:null},{id:"curie-search-query",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-sIbfSwzVpVBtymQgOQSLBpxe",object:"model_permission",created:1677273417,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"curie-search-query",parent:null},{id:"davinci-search-query",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-lYkiTZMmJMWm8jvkPx2duyHE",object:"model_permission",created:1669066353,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"davinci-search-query",parent:null},{id:"babbage-search-document",object:"model",created:1651172510,owned_by:"openai-dev",permission:[{id:"modelperm-5qFV9kxCRGKIXpBEP75chmp7",object:"model_permission",created:1669084981,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage-search-document",parent:null},{id:"ada-search-document",object:"model",created:1651172507,owned_by:"openai-dev",permission:[{id:"modelperm-8qUMuMAbo4EwedbGamV7e9hq",object:"model_permission",created:1669092640,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"ada-search-document",parent:null},{id:"text-search-curie-query-001",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-Iion0NCpsXPNtIkQ0owQLi7V",object:"model_permission",created:1677273417,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-curie-query-001",parent:null},{id:"text-search-babbage-doc-001",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-ao2r26P2Th7nhRFleHwy2gn5",object:"model_permission",created:1669084981,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-babbage-doc-001",parent:null},{id:"curie-search-document",object:"model",created:1651172508,owned_by:"openai-dev",permission:[{id:"modelperm-LDsN5wW8eKVuh1OsyciHntE9",object:"model_permission",created:1677273417,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"curie-search-document",parent:null},{id:"text-search-curie-doc-001",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-taUGRSku7bQLa24SNIwYPEsi",object:"model_permission",created:1677273417,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-curie-doc-001",parent:null},{id:"babbage-search-query",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-wSs1hMXDKsrcErlbN8HmzlLE",object:"model_permission",created:1669084981,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"babbage-search-query",parent:null},{id:"text-babbage-001",object:"model",created:1649364043,owned_by:"openai",permission:[{id:"modelperm-a3Ph5FIBbJxsoA4wvx7VYC7R",object:"model_permission",created:1675105935,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-babbage-001",parent:null},{id:"text-search-davinci-doc-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-qhSf1j2MJMujcu3t7cHnF1DN",object:"model_permission",created:1669066353,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-davinci-doc-001",parent:null},{id:"text-embedding-ada-002",object:"model",created:1671217299,owned_by:"openai-internal",permission:[{id:"modelperm-Zn6DCHbetWQvnEAkktCo6UDP",object:"model_permission",created:1686354304,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-embedding-ada-002",parent:null},{id:"text-search-babbage-query-001",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-Kg70kkFxD93QQqsVe4Zw8vjc",object:"model_permission",created:1669084981,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-search-babbage-query-001",parent:null},{id:"curie-similarity",object:"model",created:1651172510,owned_by:"openai-dev",permission:[{id:"modelperm-zhWKExSloaQiJgzjVHFmh2wR",object:"model_permission",created:1675106290,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"curie-similarity",parent:null},{id:"curie",object:"model",created:1649359874,owned_by:"openai",permission:[{id:"modelperm-oPaljeveTjEIDbhDjzFiyf4V",object:"model_permission",created:1675106503,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"curie",parent:null},{id:"text-similarity-davinci-001",object:"model",created:1651172505,owned_by:"openai-dev",permission:[{id:"modelperm-OvmcfYoq5V9SF9xTYw1Oz6Ue",object:"model_permission",created:1669066356,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-similarity-davinci-001",parent:null},{id:"text-davinci-002",object:"model",created:1649880484,owned_by:"openai",permission:[{id:"modelperm-l4EU6QlN1HcS0so0jU16kyg8",object:"model_permission",created:1679355287,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-davinci-002",parent:null},{id:"gpt-3.5-turbo",object:"model",created:1677610602,owned_by:"openai",permission:[{id:"modelperm-vXDJwtFoZKeqgwuG1i0eRjFl",object:"model_permission",created:1686673921,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"gpt-3.5-turbo",parent:null},{id:"text-davinci-003",object:"model",created:1669599635,owned_by:"openai-internal",permission:[{id:"modelperm-OCpZQfjQpoXnuT1DcEr3TtVy",object:"model_permission",created:1686222972,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"text-davinci-003",parent:null},{id:"davinci-similarity",object:"model",created:1651172509,owned_by:"openai-dev",permission:[{id:"modelperm-lYYgng3LM0Y97HvB5CDc8no2",object:"model_permission",created:1669066353,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!0,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"davinci-similarity",parent:null},{id:"gpt-3.5-turbo-0301",object:"model",created:1677649963,owned_by:"openai",permission:[{id:"modelperm-fgf5WqG21QM7pnaHHZRhsqfb",object:"model_permission",created:1686673945,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"gpt-3.5-turbo-0301",parent:null},{id:"gpt-3.5-turbo-16k",object:"model",created:1683758102,owned_by:"openai-internal",permission:[{id:"modelperm-iSLMWKwNcv96M7wUdUk1Xof5",object:"model_permission",created:1686675077,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"gpt-3.5-turbo-16k",parent:null},{id:"gpt-3.5-turbo-0613",object:"model",created:1686587434,owned_by:"openai",permission:[{id:"modelperm-8YthtkHdp9i12DHY5PdCjV61",object:"model_permission",created:1686675077,allow_create_engine:!1,allow_sampling:!0,allow_logprobs:!0,allow_search_indices:!1,allow_view:!0,allow_fine_tuning:!1,organization:"*",group:null,is_blocking:!1}],root:"gpt-3.5-turbo-0613",parent:null},{id:"gpt-4"},{id:"gpt-4-0314"},{id:"gpt-4-0613"},{id:"gpt-4-32k"},{id:"gpt-4-32k-0314"},{id:"gpt-4-32k-0613"}],no={class:"flex flex-col h-screen relative"},ro={class:"flex flex-nowrap fixed w-full items-baseline top-0 px-6 py-4 bgColor z-50"},so=t("div",{class:"text-2xl font-bold text-white"},"\u795E\u5947\u6D77\u87BA",-1),co={key:0,class:"ml-4 text-sm text-white"},uo=t("img",{loading:"lazy",src:"https://img.shields.io/github/stars/sumingcheng/Vue3-TS-ChatGPT?logo=github",alt:"GitHub"},null,-1),_o=[uo],po={class:"flex-1 mt-16 content",ref:"observedDiv"},mo={class:"font-bold mb-3 text-lg"},go=["innerHTML"],wo={class:"sticky w-full p-6 bgColor bottom-0"},bo={class:"flex items-center"},fo=t("img",{src:Pe,alt:"\u8FD4\u56DE\u5E95\u90E8"},null,-1),ho=[fo],vo={class:"bottom-0 w-full p-6 pb-8"},yo={class:"flex items-center"},jo=t("span",{class:"w-1/6 font-bold"},"API Key",-1),ko={class:"flex items-center mt-5"},xo=t("span",{class:"w-1/6 font-bold"},"\u7248\u672C",-1),To=ge({__name:"home",setup(e){const o=B.getInstance(),{getKey:l,setKey:s}=eo(),_=p(null),d=p(!1),w=p(),K={user:"ME",assistant:"Magic Conch",system:"System"},c=p(U),x=p("gpt-3.5-turbo");let V=p(!1),h=p(""),b=p("");const X=p(!1),q=()=>{window.MathJax?ee():setTimeout(q,100)},ee=()=>{ve(()=>{c.value.forEach(n=>{n.content&&n.content.includes("$")&&k(()=>{window.MathJax.typesetPromise()})})})},oe=()=>{if(!b.value){D({message:"\u8BF7\u8F93\u5165API Key",type:"warning"});return}s(b.value),D({message:"\u4FDD\u5B58\u6210\u529F",type:"success"}),d.value=!1},le=()=>{h.value=""},A=n=>{c.value[c.value.length-1].content+=n},ae=async n=>{const i=n.data.getReader();await L(i)},L=async n=>{const{done:i,value:j}=await n.read();if(i){n.closed;return}const a=Xe.decode(j).match(/data: \s*({.*?}]})/g);a==null||a.forEach(se=>{var J;const ce=se.replace("data: ",""),de=JSON.parse(ce);A((J=de.choices[0].delta.content)!=null?J:"")}),await L(n)},P=async(n=h.value)=>{if(!n){D({message:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"info"});return}V.value=!0,c.value.length===2&&c.value.pop(),c.value.push({role:"user",content:n}),le(),c.value.push({role:"assistant",content:""});const i=await $e(c.value,l(),x.value);i.status==="success"&&i.data?await ae(i):A(i.message),V.value=!1,H();const j=JSON.stringify(c.value),a=JSON.parse(j);o.saveChatRecord(a).then(()=>{console.log("Chat records saved successfully!")})},H=()=>{k(()=>{_.value&&_.value.focus()})},te=()=>{d.value=!0;let n=l();n&&(b.value=n)},ie=()=>{window.open("https://github.com/sumingcheng/Vue3-TS-ChatGPT")},I=()=>{k(()=>{w.value&&oo(w.value)})},ne=()=>{o.deleteChatRecord().then(()=>{console.log("Chat records deleted successfully!")}),c.value=U,window.location.reload()},re=async()=>{const n=await o.getChatRecord();n&&(c.value=n,I())};return we(c.value,()=>{k(()=>{X.value||I()})},{deep:!0,immediate:!0}),be(()=>{k(()=>{$()})}),fe(()=>{l()===""&&(d.value=!0),H(),re(),q(),$()}),(n,i)=>{const j=je("DeleteFilled");return u(),g(R,null,[t("div",no,[t("div",ro,[so,r(T)?N("",!0):(u(),g("div",co," \u53EF\u4EE5\u547C\u5524\u795E\u5947\u6D77\u87BA\uFF0C\u795E\u5947\u6D77\u87BA\u4F1A\u5E2E\u4F60\u89E3\u51B3\u95EE\u9898 ")),r(T)?N("",!0):(u(),g("div",{key:1,class:"ml-4 my-auto cursor-pointer",onClick:ie},_o)),t("div",{class:"ml-auto text-sm cursor-pointer",onClick:te},[m(r(C),{size:"large",type:"info",class:"elBtnStyle text-4xl"},{default:f(()=>[z("\u8BBE\u7F6E")]),_:1})])]),t("div",po,[t("div",{class:"m-6",ref_key:"chatListDom",ref:w},[(u(!0),g(R,null,O(r(c).filter(a=>a.role!=="system"),a=>(u(),g("div",null,[t("div",mo,ye(K[a.role])+"\uFF1A",1),a.content?(u(),g("div",{key:0,class:"text-base text-black whitespace-pre-wrap",innerHTML:r(to)(a.content.replace(/^\n\n/,""))},null,8,go)):(u(),Q(Ge,{key:1}))]))),256))],512)],512),t("div",wo,[t("div",bo,[m(r(Y),{class:"input",rows:1,type:"textarea",ref_key:"myInput",ref:_,modelValue:r(h),"onUpdate:modelValue":i[0]||(i[0]=a=>S(h)?h.value=a:h=a),size:"large",onKeydown:i[1]||(i[1]=he(a=>P(),["enter"])),disabled:r(V)},null,8,["modelValue","disabled"]),m(r(C),{onClick:i[2]||(i[2]=a=>P()),size:"large",type:"info",class:"elBtnStyle text-5xl ml-5"},{default:f(()=>[z("\u53D1\u9001")]),_:1}),t("div",{class:"triangle ml-4 cursor-pointer",onClick:ne},[m(j)]),r(T)?N("",!0):(u(),g("div",{key:0,class:"triangle ml-4 cursor-pointer",onClick:I},ho))])])]),m(r(xe),{modelValue:r(d),"onUpdate:modelValue":i[6]||(i[6]=a=>S(d)?d.value=a:null),title:"\u8BBE\u7F6E",width:"80%",center:""},{footer:f(()=>[t("span",null,[m(r(C),{onClick:i[5]||(i[5]=a=>d.value=!1)},{default:f(()=>[z("\u5173\u95ED")]),_:1}),m(r(C),{type:"primary",onClick:oe,class:"fix-primary"},{default:f(()=>[z("\u4FDD\u5B58")]),_:1})])]),default:f(()=>[t("div",vo,[t("div",yo,[jo,m(r(Y),{placeholder:"sk-xxxxxxxxxx",modelValue:r(b),"onUpdate:modelValue":i[3]||(i[3]=a=>S(b)?b.value=a:b=a),size:"large",clearable:""},null,8,["modelValue"])]),t("div",ko,[xo,m(r(Se),{size:"large",class:"w-full",modelValue:r(x),"onUpdate:modelValue":i[4]||(i[4]=a=>S(x)?x.value=a:null)},{default:f(()=>[(u(!0),g(R,null,O(r(io),a=>(u(),Q(r(ze),{key:a.id,label:a.id,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])],64)}}});export{To as default};
